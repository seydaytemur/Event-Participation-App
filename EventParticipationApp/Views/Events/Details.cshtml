@model EventParticipationApp.Models.Event

@{
    ViewData["Title"] = "Etkinlik Detayları";
}

@section Styles {
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f8fafc;
        }
    </style>
}

<div class="container mx-auto px-4 py-12">
    <div class="max-w-4xl mx-auto">
        <!-- Header / Back Navigation -->
        <div class="flex items-center justify-between mb-8">
            <a asp-action="Index" class="inline-flex items-center text-purple-600 hover:text-purple-800 font-semibold transition-colors group">
                <i class="fas fa-arrow-left mr-2 group-hover:-translate-x-1 transition-transform"></i>
                Etkinliklere Dön
            </a>
            <div class="flex gap-3">
                <a asp-action="Edit" asp-route-id="@Model.Id" class="px-4 py-2 rounded-xl bg-amber-100 text-amber-700 hover:bg-amber-200 font-bold text-sm transition-all flex items-center gap-2">
                    <i class="fas fa-edit"></i> Düzenle
                </a>
            </div>
        </div>

        <!-- Main Content Card -->
        <div class="bg-white rounded-3xl shadow-xl shadow-purple-100 border border-gray-100 overflow-hidden mb-8">
            <!-- Top Banner Overlay -->
            <div class="h-48 bg-gradient-to-r from-purple-600 to-indigo-600 flex items-end p-8">
                <div class="flex items-center gap-4">
                    <div class="p-4 bg-white/20 backdrop-blur-md rounded-2xl border border-white/30">
                        <i class="fas fa-calendar-star text-white text-3xl"></i>
                    </div>
                    <div>
                        <h1 class="text-3xl font-extrabold text-white">@Model.Title</h1>
                        <p class="text-purple-100 flex items-center gap-2 text-sm mt-1">
                            <i class="far fa-clock"></i>
                            @Model.EventDate.ToString("dd MMMM yyyy, HH:mm")
                        </p>
                    </div>
                </div>
            </div>

            <div class="grid grid-cols-1 lg:grid-cols-3 gap-0">
                <!-- Left Details Column -->
                <div class="p-8 lg:col-span-2 border-r border-gray-50">
                    <h3 class="text-sm font-bold text-gray-400 uppercase tracking-widest mb-4">Etkinlik Açıklaması</h3>
                    <div class="prose prose-purple max-w-none">
                        <p class="text-gray-700 text-lg leading-relaxed">
                            @(string.IsNullOrWhiteSpace(Model.Description) ? "Bu etkinlik için bir açıklama girilmemiş." : Model.Description)
                        </p>
                    </div>

                    <div class="mt-10 pt-10 border-t border-gray-100">
                        <a asp-controller="Participations" asp-action="Create" asp-route-eventId="@Model.Id" 
                           class="inline-flex items-center justify-center gap-3 w-full md:w-auto px-10 py-4 bg-purple-600 hover:bg-purple-700 text-white font-bold rounded-2xl transition-all shadow-lg shadow-purple-200">
                            <i class="fas fa-user-plus"></i>
                            Bu Etkinliğe Katıl
                        </a>
                    </div>
                </div>

                <!-- Right Participants Column -->
                <div class="p-8 bg-gray-50/50">
                    <div class="flex items-center justify-between mb-6">
                        <h3 class="text-sm font-bold text-gray-400 uppercase tracking-widest">Katılımcılar</h3>
                        <span class="bg-purple-100 text-purple-600 px-3 py-1 rounded-full text-xs font-bold">
                            @(Model.Participations?.Count() ?? 0) Kişi
                        </span>
                    </div>

                    <div class="space-y-4 max-h-[400px] overflow-y-auto pr-2 custom-scrollbar">
                        @if (Model.Participations != null && Model.Participations.Any())
                        {
                            @foreach (var participant in Model.Participations)
                            {
                                <div class="flex items-center gap-3 p-3 bg-white rounded-xl border border-gray-100 shadow-sm transition-transform hover:scale-[1.02]">
                                    <div class="w-10 h-10 rounded-full bg-gradient-to-br from-purple-100 to-indigo-100 flex items-center justify-center text-purple-600 font-bold text-sm">
                                        @participant.ParticipantName.Substring(0, 1).ToUpper()
                                    </div>
                                    <span class="text-gray-700 font-medium">@participant.ParticipantName</span>
                                </div>
                            }
                        }
                        else
                        {
                            <div class="text-center py-10">
                                <i class="fas fa-users-slash text-gray-300 text-4xl mb-3"></i>
                                <p class="text-gray-500 text-sm">Henüz kimse katılmadı.</p>
                                <p class="text-gray-400 text-xs mt-1 italic">İlk katılan sen ol!</p>
                            </div>
                        }
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

@section Scripts {
    @{
        await Html.RenderPartialAsync("_ValidationScriptsPartial");
    }
}
